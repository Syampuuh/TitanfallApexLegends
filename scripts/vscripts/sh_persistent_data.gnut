global function ShPersistentData_LevelInit_Begin
global function ShPersistentData_LevelInit_Finish

#if(false)




#endif

#if CLIENT || UI 
global function AddCallback_OnPersistentDataReady
global function GetPersistentIntArray
global function IsPersistenceBitSet
global function IsAnyPersistenceBitSet
#endif

#if ( CLIENT || UI ) && DEV 
global function DEV_ShouldIgnorePersistence
#endif

#if(false)





















#endif

#if(CLIENT)
global function ServerToClient_OnPersistentDataReady
#endif

#if(UI)
global function ClientToUI_OnPersistentDataReady
#endif



//
//
//
//
//

#if(false)




#endif

#if CLIENT || UI 
global typedef OnPersistentDataReadyCallbackType void functionref( entity player )
#endif



//
//
//
//
//

struct FileStruct_LifetimeLevel
{
	#if(false)




#endif

	array<OnPersistentDataReadyCallbackType> onPersistentDataReadyCallbacks
}
FileStruct_LifetimeLevel& fileLevel



//
//
//
//
//

void function ShPersistentData_LevelInit_Begin()
{
	FileStruct_LifetimeLevel newFileLevel
	fileLevel = newFileLevel

	#if(false)





#endif

	#if(CLIENT)
		Remote_RegisterClientFunction( "ServerToClient_OnPersistentDataReady" )
	#endif
}


void function ShPersistentData_LevelInit_Finish()
{
	#if(false)

#endif
}


#if(false)


//
//
//
//
//

#endif


#if(false)







#endif



//
//
//
//
//

#if ( CLIENT || UI ) && DEV 
bool function DEV_ShouldIgnorePersistence()
{
	return GetConVarBool( "loadouts_ignore_persistence" )
}
#endif


#if(false)



































//



















































//
//
//
//
//











//











//
//
//
//
//











//

















//
//
//
//








//
//
//













































//

//












//




















































































































































#endif //



//
//
//
//
//

#if(false)





#endif


#if CLIENT || UI 
void function AddCallback_OnPersistentDataReady( OnPersistentDataReadyCallbackType cb )
{
	Assert( !fileLevel.onPersistentDataReadyCallbacks.contains( cb ), "Callback already registered" )
	fileLevel.onPersistentDataReadyCallbacks.append( cb )
}
#endif


#if CLIENT || UI 
//
array<int> function GetPersistentIntArray( entity player, string variableName )
{
	array<int> arr
	int size = PersistenceGetArrayCount( variableName )

	for ( int i = 0; i < size; i++ )
	{
		int element = player.GetPersistentVarAsInt( variableName + "[" + i + "]" )

		arr.append( element )
	}

	return arr
}
#endif


#if(false)
//












#endif


#if(false)


















#endif


#if CLIENT || UI 
bool function IsPersistenceBitSet( entity player, string persistenceVar, int bitIndex )
{
	int arrayIndex = bitIndex / 32
	int bitOffset  = bitIndex % 32

	int decimalValue = 1 << bitOffset

	Assert( arrayIndex < PersistenceGetArrayCount( persistenceVar ), "Need to increase the array size of the persistenceVar " + persistenceVar )
	persistenceVar = persistenceVar + "[" + arrayIndex + "]"

	return ((player.GetPersistentVarAsInt( persistenceVar ) & decimalValue) != 0)
}
#endif


#if CLIENT || UI 
bool function IsAnyPersistenceBitSet( entity player, string persistenceVar )
{
	int arrayCount = PersistenceGetArrayCount( persistenceVar )
	for ( int i = 0; i < arrayCount; i++ )
	{
		if ( player.GetPersistentVarAsInt( persistenceVar + "[" + i + "]" ) > 0 )
			return true
	}
	return false
}
#endif



//
//
//
//
//

#if(false)






















#endif


#if(CLIENT)
void function ServerToClient_OnPersistentDataReady()
{
	RunUIScript( "ClientToUI_OnPersistentDataReady" )

	foreach( OnPersistentDataReadyCallbackType cb in fileLevel.onPersistentDataReadyCallbacks )
		cb( GetLocalClientPlayer() )
}
#endif


#if(UI)
void function ClientToUI_OnPersistentDataReady()
{
	foreach( OnPersistentDataReadyCallbackType cb in fileLevel.onPersistentDataReadyCallbacks )
		cb( GetUIPlayer() )
}
#endif


